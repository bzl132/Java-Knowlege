# 协议

## Oauth 2.0

## 解决的问题

场景：其他客户端或应用使用当前应用中用户的资源

问题：

- 其他端是否保存用户密码，不确定，不安全
- 当前应用不得不部署密码登陆
- 登陆后其他应用能获取到当前用户的所有资源
- 用户只能修改密码后，才能收回赋权
- 第三方被破解，其中的用户密码会泄露

### 思路

客户端和服务提供商之间，添加一个授权层

- 授权层可以控制授权范围/有效期
- 不会用密码登陆

### 运行流程

- 用户访问客户端，客户端请求用户授权
- 用户同意授权
- 客户端使用上一步的授权，向认证服务器申请令牌
- 认证服务器对客户端认证，无误后，发放令牌
- 客户端使用令牌，向资源服务器神器获取资源
- 资源服务器确认令牌无误，开放资源

### 授权模式

- 授权码模式
  - 认证时通过授权码获取令牌
- 简化模式
  - 认证时先获取重定向URI及Hash
  - 向资源服务器请求页面，用其中的代码解析Hash中的令牌
- 密码模式
  - 可信客户端，
- 客户端模式
  - 以客户端的名义申请令牌